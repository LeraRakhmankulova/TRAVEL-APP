{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{74:function(t){\"use strict\";t.exports=function t(e,r){if(e===r)return!0;if(e&&r&&\"object\"==typeof e&&\"object\"==typeof r){if(e.constructor!==r.constructor)return!1;var n,o,i;if(Array.isArray(e)){if((n=e.length)!=r.length)return!1;for(o=n;0!=o--;)if(!t(e[o],r[o]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if((n=(i=Object.keys(e)).length)!==Object.keys(r).length)return!1;for(o=n;0!=o--;)if(!Object.prototype.hasOwnProperty.call(r,i[o]))return!1;for(o=n;0!=o--;){var s=i[o];if(!t(e[s],r[s]))return!1}return!0}return e!=e&&r!=r}},75:function(t,e,r){\"use strict\";function n(t,e,r){function n(){i&&clearTimeout(i)}function o(){function r(){h=Date.now(),e.apply(l,a)}function o(){i=void 0}for(var s=arguments.length,a=Array(s),c=0;c<s;c++)a[c]=arguments[c];var l=this,v=Date.now()-h;d||(!p&&f&&!i&&r(),n(),void 0===f&&v>t?p?(h=Date.now(),!u&&(i=setTimeout(f?o:r,t))):r():!0!==u&&(i=setTimeout(f?o:r,void 0===f?t-v:t)))}var i,s=r||{},a=s.noTrailing,u=void 0!==a&&a,c=s.noLeading,p=void 0!==c&&c,l=s.debounceMode,f=void 0===l?void 0:l,d=!1,h=0;return o.cancel=function(t){var e=(t||{}).upcomingOnly;n(),d=!(void 0!==e&&e)},o}function o(t,e,r){var o=(r||{}).atBegin;return n(t,e,{debounceMode:!1!==(void 0!==o&&o)})}r.r(e),r.d(e,\"debounce\",function(){return o}),r.d(e,\"throttle\",function(){return n})},76:function(){throw new Error(\"Module parse failed: Unexpected token (2538:26)\\nYou may need an appropriate loader to handle this file type.\\n|   }\\n| \\n>   let failPosition = trav?.type === 'error' && trav.position;\\n| \\n|   return {type: 'success', marks, position: pos, failPosition}\")},77:function(t,e,r){\"use strict\";function n(t){return t>>16?4:t>>11?3:t>>7?2:1}function o(t){for(var e=0,r=0;r<t.length;r++){var o=n(t.codePointAt(r));4==o&&r++,e+=o}return e}function i(t,e,r){void 0===r&&(r=0);var o=r,i=0;for(i=r;o<e;i++){var s=n(t.codePointAt(i));4===s&&i++,o+=s}return i}function s(t,e){for(var r=h(t.length,e.length),o=0,i=0;i<r;){var s=t.codePointAt(i);if(s!==e.codePointAt(i))return o;var a=n(s);o+=a,i+=4===a?2:1}return o}function a(t,e,r){void 0===r&&(r=0);for(var o=h(t.length,e.length)-r,i=0,s=0;s<o;){var a=t.codePointAt(t.length-1-s);if(a!==e.codePointAt(e.length-1-s))return i;var u=n(a);i+=u,s+=4===u?2:1}return i}function u(t,e){return{data:t,startMeta:e,endMeta:e}}function c(t){if(void 0!==t.data)return t.data;var e,r=t.content;switch(r.type){case\"string\":e=r.parts.map(function(t){return t.value}).join(\"\");break;case\"array\":e=r.elements.map(function(t){return c(t)});break;case\"object\":e={};for(var n=0,o=Object.entries(r.fields);n<o.length;n++){var i=o[n],s=i[0],a=i[1];e[s]=c(a)}}return t.data=e,e}function p(t){return t.content?t.content.type:Array.isArray(t.data)?\"array\":null===t.data?\"null\":typeof t.data}function l(t,e){var r=p(t);if(r!==p(e))return e;var n=new g(t.endMeta),i=new g(e.endMeta);switch(r){case\"object\":for(var u=n.asObject(t),f=i.asObject(e),d=0,h=Object.keys(u.fields).length,v=Object.keys(f.fields).length,y=0,m=Object.entries(f.fields);y<m.length;y++){var b=m[y],w=b[0],j=b[1],S=u.fields[w];S&&(f.fields[w]=l(S,j),f.fields[w]===S&&d++)}return h===v&&h===d?t:e;case\"array\":var P=n.asArray(t),O=i.asArray(e);if(P.elements.length!==O.elements.length)break;for(var E=0,A=0;A<O.elements.length;A++)O.elements[A]=l(P.elements[A],O.elements[A]),O.elements[A]!==P.elements[A]&&E++;return 0==E?t:e;case\"null\":case\"boolean\":case\"number\":if(c(t)===c(e))return t;break;case\"string\":var k=c(t),M=c(e);if(k===M)return t;var I=i.copyString(null),F=s(k,M),R=a(k,M,F),V=o(M),z=o(k);0<F&&i.stringAppendSlice(I,t,0,F),F<V-R&&i.stringAppendSlice(I,e,F,V-R),z-R<z&&i.stringAppendSlice(I,t,z-R,z);var C=i.finalize(I);if(c(C)!==M)throw new Error(\"incorrect string rebase\");return C}return e}function f(t,e,r){var n=new g(r);return new m(n,t,e).process()}function d(t,e){return new m(b,t,e).process()}var h=Math.min;r.r(e);var v={};r.r(v),r.d(v,\"wrap\",function(){return u}),r.d(v,\"unwrap\",function(){return c}),r.d(v,\"getType\",function(){return p}),r.d(v,\"rebaseValue\",function(){return l}),r.d(v,\"applyPatch\",function(){return f});var y=[\"Value\",\"Copy\",\"Blank\",\"ReturnIntoArray\",\"ReturnIntoObject\",\"ReturnIntoObjectSameKey\",\"PushField\",\"PushElement\",\"PushParent\",\"Pop\",\"PushFieldCopy\",\"PushFieldBlank\",\"PushElementCopy\",\"PushElementBlank\",\"ReturnIntoObjectPop\",\"ReturnIntoObjectSameKeyPop\",\"ReturnIntoArrayPop\",\"ObjectSetFieldValue\",\"ObjectCopyField\",\"ObjectDeleteField\",\"ArrayAppendValue\",\"ArrayAppendSlice\",\"StringAppendString\",\"StringAppendSlice\"],m=function(){function t(t,e,r){this.i=0,this.inputStack=[],this.outputStack=[],this.model=t,this.root=e,this.patch=r}return t.prototype.read=function(){return this.patch[this.i++]},t.prototype.process=function(){for(this.inputStack.push({value:this.root}),this.outputStack.push({value:this.root});this.i<this.patch.length;){var t=this.read(),e=y[t];if(!e)throw new Error(\"Unknown opcode: \"+t);this[\"process\"+e].apply(this)}var r=this.outputStack.pop();return this.finalizeOutput(r)},t.prototype.inputEntry=function(){return this.inputStack[this.inputStack.length-1]},t.prototype.inputKey=function(t,e){return t.keys||(t.keys=this.model.objectGetKeys(t.value).sort()),t.keys[e]},t.prototype.outputEntry=function(){return this.outputStack[this.outputStack.length-1]},t.prototype.outputArray=function(){var t=this.outputEntry();return t.writeValue||(t.writeValue=this.model.copyArray(t.value)),t.writeValue},t.prototype.outputObject=function(){var t=this.outputEntry();return t.writeValue||(t.writeValue=this.model.copyObject(t.value)),t.writeValue},t.prototype.outputString=function(){var t=this.outputEntry();return t.writeValue||(t.writeValue=this.model.copyString(t.value)),t.writeValue},t.prototype.finalizeOutput=function(t){return t.writeValue?this.model.finalize(t.writeValue):t.value},t.prototype.processValue=function(){var t=this.model.wrap(this.read());this.outputStack.push({value:t})},t.prototype.processCopy=function(){var t=this.inputEntry();this.outputStack.push({value:t.value})},t.prototype.processBlank=function(){this.outputStack.push({value:null})},t.prototype.processReturnIntoArray=function(){var t=this.outputStack.pop(),e=this.finalizeOutput(t),r=this.outputArray();this.model.arrayAppendValue(r,e)},t.prototype.processReturnIntoObject=function(){var t=this.read(),e=this.outputStack.pop(),r=this.finalizeOutput(e);r=this.model.markChanged(r);var n=this.outputObject();this.model.objectSetField(n,t,r)},t.prototype.processReturnIntoObjectSameKey=function(){var t=this.inputEntry(),e=this.outputStack.pop(),r=this.finalizeOutput(e),n=this.outputObject();this.model.objectSetField(n,t.key,r)},t.prototype.processPushField=function(){var t=this.read(),e=this.inputEntry(),r=this.inputKey(e,t),n=this.model.objectGetField(e.value,r);this.inputStack.push({value:n,key:r})},t.prototype.processPushElement=function(){var t=this.read(),e=this.inputEntry(),r=this.model.arrayGetElement(e.value,t);this.inputStack.push({value:r})},t.prototype.processPop=function(){this.inputStack.pop()},t.prototype.processPushFieldCopy=function(){this.processPushField(),this.processCopy()},t.prototype.processPushFieldBlank=function(){this.processPushField(),this.processBlank()},t.prototype.processPushElementCopy=function(){this.processPushElement(),this.processCopy()},t.prototype.processPushElementBlank=function(){this.processPushElement(),this.processBlank()},t.prototype.processReturnIntoObjectPop=function(){this.processReturnIntoObject(),this.processPop()},t.prototype.processReturnIntoObjectSameKeyPop=function(){this.processReturnIntoObjectSameKey(),this.processPop()},t.prototype.processReturnIntoArrayPop=function(){this.processReturnIntoArray(),this.processPop()},t.prototype.processObjectSetFieldValue=function(){this.processValue(),this.processReturnIntoObject()},t.prototype.processObjectCopyField=function(){this.processPushField(),this.processCopy(),this.processReturnIntoObjectSameKey(),this.processPop()},t.prototype.processObjectDeleteField=function(){var t=this.read(),e=this.inputEntry(),r=this.inputKey(e,t),n=this.outputObject();this.model.objectDeleteField(n,r)},t.prototype.processArrayAppendValue=function(){var t=this.model.wrap(this.read()),e=this.outputArray();this.model.arrayAppendValue(e,t)},t.prototype.processArrayAppendSlice=function(){var t=this.read(),e=this.read(),r=this.outputArray(),n=this.inputEntry().value;this.model.arrayAppendSlice(r,n,t,e)},t.prototype.processStringAppendString=function(){var t=this.model.wrap(this.read()),e=this.outputString();this.model.stringAppendValue(e,t)},t.prototype.processStringAppendSlice=function(){var t=this.read(),e=this.read(),r=this.outputString(),n=this.inputEntry().value;this.model.stringAppendSlice(r,n,t,e)},t}(),g=function(){function t(t){this.meta=t}return t.prototype.wrap=function(t){return this.wrapWithMeta(t,this.meta,this.meta)},t.prototype.wrapWithMeta=function(t,e,r){return void 0===r&&(r=this.meta),{data:t,startMeta:e,endMeta:r}},t.prototype.asObject=function(t){if(!t.content){for(var e={},r=0,n=Object.entries(t.data);r<n.length;r++){var o=n[r],i=o[0],s=o[1];e[i]=this.wrapWithMeta(s,t.startMeta)}t.content={type:\"object\",fields:e}}return t.content},t.prototype.asArray=function(t){var e=this;if(!t.content){var r=t.data.map(function(r){return e.wrapWithMeta(r,t.startMeta)}),n=r.map(function(){return e.meta});t.content={type:\"array\",elements:r,metas:n}}return t.content},t.prototype.asString=function(t){if(!t.content){var e=t.data,r={value:e,utf8size:o(e),uses:[],startMeta:t.startMeta,endMeta:t.endMeta};t.content=this.stringFromParts([r])}return t.content},t.prototype.stringFromParts=function(t){for(var e={type:\"string\",parts:t},r=0,n=t;r<n.length;r++)n[r].uses.push(e);return e},t.prototype.objectGetKeys=function(t){return t.content?Object.keys(t.content.fields):Object.keys(t.data)},t.prototype.objectGetField=function(t,e){return this.asObject(t).fields[e]},t.prototype.arrayGetElement=function(t,e){return this.asArray(t).elements[e]},t.prototype.finalize=function(t){return this.updateEndMeta(t),{content:t,startMeta:this.meta,endMeta:this.meta}},t.prototype.markChanged=function(t){return this.wrap(c(t))},t.prototype.updateEndMeta=function(t){if(\"string\"==t.type)for(var e=0,r=t.parts;e<r.length;e++)r[e].endMeta=this.meta;else if(\"array\"===t.type)for(var n=0,o=t.elements;n<o.length;n++)(i=o[n]).content&&i.endMeta!==this.meta&&this.updateEndMeta(i.content),i.endMeta=this.meta;else for(var i,s=0,a=Object.values(t.fields);s<a.length;s++)(i=a[s]).content&&i.endMeta!==this.meta&&this.updateEndMeta(i.content),i.endMeta=this.meta},t.prototype.copyString=function(t){if(t){var e=this.asString(t);return this.stringFromParts(e.parts.slice())}return{type:\"string\",parts:[]}},t.prototype.copyObject=function(t){var e={type:\"object\",fields:{}};if(t){var r=this.asObject(t);Object.assign(e.fields,r.fields)}return e},t.prototype.copyArray=function(t){var e=t?this.asArray(t):null;return{type:\"array\",elements:e?e.elements:[],metas:e?e.metas:[]}},t.prototype.objectSetField=function(t,e,r){t.fields[e]=r},t.prototype.objectDeleteField=function(t,e){delete t.fields[e]},t.prototype.arrayAppendValue=function(t,e){t.elements.push(e),t.metas.push(this.meta)},t.prototype.arrayAppendSlice=function(t,e,r,n){var o,i,s=this.asArray(e),a=s.elements.length===r;if((o=t.elements).push.apply(o,s.elements.slice(r,n)),a)(i=t.metas).push.apply(i,s.metas.slice(r,n));else for(var u=r;u<n;u++)t.metas.push(this.meta)},t.prototype.stringAppendValue=function(t,e){for(var r,n=0,o=this.asString(e).parts;n<o.length;n++)r=o[n],this.stringAppendPart(t,r)},t.prototype.stringAppendPart=function(t,e){t.parts.push(e),e.uses.push(t)},t.prototype.resolveStringPart=function(t,e,r){if(0===r)return e;for(var n,o=e;o<t.parts.length;o++){if(r===(n=t.parts[o]).utf8size)return o+1;if(r<n.utf8size)return this.splitString(n,r),o+1;r-=n.utf8size}throw new Error(\"splitting string out of bounds\")},t.prototype.splitString=function(t,e){var r,o=e,i=t.utf8size-o;if(t.utf8size!==t.value.length){var s=0;for(e=0;s<o;e++){var a=n(t.value.codePointAt(e));4===a&&e++,s+=a}}r=t.value.slice(0,e);var u={value:t.value.slice(e),utf8size:i,uses:t.uses.slice(),startMeta:t.startMeta,endMeta:t.endMeta};t.value=r,t.utf8size=o;for(var c=0,p=t.uses;c<p.length;c++){var l=p[c],f=l.parts.indexOf(t);if(-1===f)throw new Error(\"bug: mismatch between string parts and use.\");l.parts.splice(f+1,0,u)}},t.prototype.stringAppendSlice=function(t,e,r,n){for(var o,i=this.asString(e),s=this.resolveStringPart(i,0,r),a=this.resolveStringPart(i,s,n-r),u=s;u<a;u++)o=i.parts[u],this.stringAppendPart(t,o)},t}(),b={wrap:function(t){return t},finalize:function(t){return Array.isArray(t)?t:t.data},markChanged:function(t){return t},objectGetKeys:function(t){return Object.keys(t)},objectGetField:function(t,e){return t[e]},arrayGetElement:function(t,e){return t[e]},copyObject:function(t){var e={type:\"object\",data:{}};if(null!==t)for(var r=0,n=Object.entries(t);r<n.length;r++){var o=n[r],i=o[0],s=o[1];e.data[i]=s}return e},copyArray:function(t){return null===t?[]:t.slice()},copyString:function(t){return{type:\"string\",data:null===t?\"\":t}},objectSetField:function(t,e,r){t.data[e]=r},objectDeleteField:function(t,e){delete t.data[e]},arrayAppendValue:function(t,e){t.push(e)},arrayAppendSlice:function(t,e,r,n){t.push.apply(t,e.slice(r,n))},stringAppendSlice:function(t,e,r,n){var o=e,s=i(o,r),a=i(o,n,s);t.data+=o.slice(s,a)},stringAppendValue:function(t,e){t.data+=e}};r.d(e,\"incremental\",function(){return v}),r.d(e,\"applyPatch\",function(){return d})},78:function(t,e,r){function n(t){return t&&\"object\"==typeof t&&\"default\"in t?t:{default:t}}function o(){return(o=Object.assign?Object.assign.bind():function(t){for(var e,r=1;r<arguments.length;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)}function i(t,e,r){var n,o=e.token,i=new t(\"https://\"+e.projectId+\".api.sanity.io/v1/data/listen/\"+e.dataset+\"?query=*&effectFormat=mendoza\",{withCredentials:!0,headers:o?{Authorization:\"Bearer \"+o}:void 0});return b(i,\"welcome\",r.open),b(i,\"mutation\",(n=r.next,function(t){var e;try{e=JSON.parse(t.data)}catch(t){return}n(e)})),b(i,\"channelError\",function(t){var e;i.close();try{e=JSON.parse(t.data)}catch(t){return void r.error(new Error(\"Unknown error parsing listener message\"))}r.error(new Error(e.message||e.error||\"Listener returned HTTP \"+e.statusCode))}),b(i,\"error\",function(t){var e=\"undefined\"!=typeof window&&window.location.origin,n=e?\", and that the CORS-origin (\"+e+\") is allowed\":\"\",o=function(t){return\"object\"==typeof t&&null!==t&&\"message\"in t}(t)?\" (\"+t.message+\")\":\"\";r.error(new Error(\"Error establishing listener - check that the project ID and dataset are correct\"+n+o))}),{unsubscribe:function(){return Promise.resolve(i.close())}}}function s(t){return t._id.startsWith(\"drafts.\")?t._id.slice(7):t._id}function a(t,e){var r=o({},t);return delete r._rev,y.applyPatch(r,e)}function u(){return Promise.resolve()}function c(t,e,r){if(!t.s){if(r instanceof w){if(!r.s)return void(r.o=c.bind(null,t,e));1&e&&(e=r.s),r=r.v}if(r&&r.then)return void r.then(c.bind(null,t,e),c.bind(null,t,2));t.s=e,t.v=r;const n=t.o;n&&n(t)}}function p(t){return t instanceof w&&1&t.s}var l,f=r(7),d=r(74),h=r(75),v=r(76),y=r(77),m=n(f),g=n(d),b=function(t,e,r){(function(t){return\"undefined\"!=typeof window&&t.addEventListener===window.EventSource.prototype.addEventListener})(t)&&t.addEventListener(e,r,!1),t.addEventListener(e,r)},w=function(){function t(){}return t.prototype.then=function(e,r){var n=new t,o=this.s;if(o){var i=1&o?e:r;if(i){try{c(n,1,i(this.v))}catch(t){c(n,2,t)}return n}return this}return this.o=function(t){try{var o=t.v;1&t.s?c(n,1,e?e(o):o):r?c(n,1,r(o)):c(n,2,o)}catch(t){c(n,2,t)}},n},t}(),j=function(t){var e=t.projectId,r=t.dataset,n=t.token,o=t.documentLimit;try{return Promise.resolve(fetch(\"https://\"+e+\".api.sanity.io/v1/data/export/\"+r,{credentials:\"include\",headers:n?{Authorization:\"Bearer \"+n}:void 0})).then(function(t){function e(){var e,r,n=function(t){function e(){n=!0,r&&r.cancel()}if(!t)throw new Error(\"Failed to read body from response\");var r,n=!1;return new ReadableStream({start:function(o){r=t.getReader();var i=new TextDecoder,s=\"\";r.read().then(function t(a){try{if(a.done)return n?Promise.resolve():0===(s=s.trim()).length?(o.close(),Promise.resolve()):(o.enqueue(JSON.parse(s)),o.close(),Promise.resolve());for(var u,c=(s+=i.decode(a.value,{stream:!0})).split(\"\\n\"),p=0;p<c.length-1;++p)if(0!==(u=c[p].trim()).length)try{o.enqueue(JSON.parse(u))}catch(p){return o.error(p),e(),Promise.resolve()}if(s=c[c.length-1],!r)return Promise.resolve();var l=function(e,n){try{var o=Promise.resolve(r.read()).then(function(e){t(e)})}catch(e){return n(e)}return o&&o.then?o.then(void 0,n):o}(0,function(t){o.error(t)});return Promise.resolve(l&&l.then?l.then(function(){}):void 0)}catch(p){return Promise.reject(p)}}).catch(function(t){return o.error(t)})},cancel:e})}(t.body).getReader(),i=[],s=function(t,e){function r(o){for(i=o;p(s=e())&&(s=s.v),s;){if(s.then)return void s.then(n).then(void 0,u);if((i=t())&&i.then){if(!p(i))return void i.then(r).then(void 0,u);i=i.v}}c(a,1,i)}function n(o){if(o){do{if((i=t())&&i.then){if(!p(i))return void i.then(r).then(void 0,u);i=i.v}if(p(o=e())&&(o=o.v),!o)return void c(a,1,i)}while(!o.then);o.then(n).then(void 0,u)}else c(a,1,i)}var o;do{var i=t();if(i&&i.then){if(!p(i)){o=!0;break}i=i.v}var s=e();if(p(s)&&(s=s.v),!s)return i}while(!s.then);var a=new w,u=c.bind(null,a,2);return(o?i.then(r):s.then(n)).then(void 0,u),a}(function(){return Promise.resolve(n.read()).then(function(t){if(function(t){return!!t&&\"error\"in t&&\"object\"==typeof t.error&&null!==t.error&&\"description\"in t.error&&\"string\"==typeof t.error.description&&!(\"_id\"in t)}(r=(e=t).value))throw new Error(\"Error streaming dataset: \"+r.error);if(r&&!r._id.startsWith(\"_.\")&&i.push(r),o&&i.length>o)throw n.cancel(\"Reached document limit\"),new Error(\"Error streaming dataset: Reached limit of \"+o+\" documents\")})},function(){return!e.done});return s&&s.then?s.then(function(){return i}):i}var r=function(){if(200!==t.status)return Promise.resolve(t.json()).then(function(t){throw new Error(\"Error streaming dataset: \"+(\"object\"==typeof(e=t)&&\"error\"in e&&\"message\"in e?e.message||e.error:\"<unknown error>\"));var e})}();return r&&r.then?r.then(e):e()})}catch(t){return Promise.reject(t)}};Object.defineProperty(e,\"groq\",{enumerable:!0,get:function(){return m.default}}),e.groqStore=function(t){var e;!function(){var t=[\"EventSource\",\"ReadableStream\",\"fetch\"].filter(function(t){return!(t in window)});if(0<t.length)throw new Error(\"Browser not supported. Missing browser APIs: \"+t.join(\", \"))}();var r=null==(e=t.EventSource)?window.EventSource:e;if(t.token&&r===window.EventSource)throw new Error(\"When`token` option is used, `EventSource` option must also be provided. EventSource cannot be `window.EventSource`, as it does not support passing a token.\");return function(t,e){function r(t){return c(t.query,t.params).then(function(e){\"previousResult\"in t&&g.default(t.previousResult,e)||(t.previousResult=e,t.callback(void 0,e))}).catch(function(e){t.callback(e)})}var n,c=function(t,e){return Promise.resolve(p()).then(function(){var r=v.parse(t,{params:e});return Promise.resolve(v.evaluate(r,{dataset:f,params:e})).then(function(t){return t.get()})})},p=function(){try{return n||(n=function(t,e,r){function n(t){b=void 0,j=void 0,w=void 0,e(d?function(t){var e=new Map;return t.forEach(function(t){var r=e.get(s(t));t._id.startsWith(\"drafts.\")?e.set(s(t),function(t){return o({},t,{_id:s(t)})}(t)):r||e.set(t._id,t)}),Array.from(e.values())}(t):t)}var c=r.getDocuments,p=r.EventSource,l=t.projectId,f=t.dataset,d=t.overlayDrafts,h=t.documentLimit,v=t.token;if(!t.listen)return{unsubscribe:u,loaded:c({projectId:l,dataset:f,documentLimit:h,token:v}).then(n).then(u)};var y,m,g,b,w,j,S=new Map,P=[],O=new Promise(function(t,e){m=t,g=e});return{unsubscribe:i(p,t,{next:function(t){y?(function(t){if(t.effects&&!t.documentId.startsWith(\"_.\")){var e=S.get(t.documentId)||null;!function(t,e){var r=S.get(t),n=y||[],o=r?n.indexOf(r):-1;-1===o&&e?(n.push(e),S.set(t,e)):e?(n.splice(o,1,e),S.set(t,e)):(n.splice(o,1),S.delete(t))}(t.documentId,a(e,t.effects.apply))}}(t),function(t,e){clearTimeout(j),w!==e.transactionId&&b?(n(b),w=void 0):(w=e.transactionId,b=t.slice()),j=setTimeout(n,25,t.slice())}(y,t)):P.push(t)},open:function(){try{return Promise.resolve(c({projectId:l,dataset:f,documentLimit:h,token:v})).then(function(t){(y=function(t,e){var r=new Map;return e.forEach(function(t){var e=r.get(t.documentId)||[];e.push(t),r.set(t.documentId,e)}),r.forEach(function(e,r){var n=t.find(function(t){return t._id===r});if(n){var o=!1,i=n;e.forEach(function(t){(o=o||t.previousRev===n._rev)&&t.effects&&(i=a(i,t.effects.apply))}),t.splice(t.indexOf(n),1,i)}else console.warn(\"Received mutation for missing document %s\",r)}),t}(t,P)).forEach(function(t){return S.set(t._id,t)}),n(y),m()})}catch(t){return Promise.reject(t)}},error:function(t){return g(t)}}).unsubscribe,loaded:O}}(t,function(t){f=t,d()},e)),Promise.resolve(n.loaded).then(function(){})}catch(t){return Promise.reject(t)}},f=[],d=h.throttle(t.subscriptionThrottleMs||50,function(){y.forEach(r)}),y=[];return{query:c,getDocument:function(t){return Promise.resolve(p()).then(function(){return c(m.default(l||(e=[\"*[_id == $id][0]\"],r||(r=e.slice(0)),e.raw=r,l=e)),{id:t});var e,r})},getDocuments:function(t){return Promise.resolve(p()).then(function(){var e=t.map(function(t){return'*[_id == \"'+t+'\"][0]'}).join(\",\\n\");return c(\"[\"+e+\"]\")})},subscribe:function(e,n,o){if(!t.listen)throw new Error(\"Cannot use `subscribe()` without `listen: true`\");var i={query:e,params:n,callback:o};y.push(i);var s=!1;return r(i),{unsubscribe:function(){return s||(s=!0,y.splice(y.indexOf(i),1)),Promise.resolve()}}},close:function(){return d.cancel(),n?n.unsubscribe():Promise.resolve()}}}(t,{EventSource:r,getDocuments:j})}}}]);","extractedComments":[]}